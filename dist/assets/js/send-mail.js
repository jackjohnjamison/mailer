"use strict";(function(){function a(a){var b=new XMLHttpRequest;b.open("POST","mailer/api",!0),b.setRequestHeader("Content-type","application/json"),b.send(a),b.onreadystatechange=function(){if(console.log(b.readyState,b.status,b.response),console.log(JSON.parse(b.response)),4==b.readyState&&200==b.status)switch(b.response.result){case"success":var a=JSON.parse(b.response).message.to;d.set("success","Message sent sucessfully to ".concat(a,"!")),e.removeSending();break;case"failure":d.set("alert","".concat(b.response,"!")),e.removeSending();break;default:d.set("alert","Sending error"),e.removeSending();}}}function b(){return{toAddress:document.getElementById("toAddress").value,subject:document.getElementById("subject").value,html:document.getElementById("html").value,text:document.getElementById("text").value}}function c(){var c=JSON.stringify(b());a(c),e.setSending()}var d={messageElement:document.getElementById("message"),set:function(a,b){this.messageElement.setAttribute("state",a),this.messageElement.innerText=b}},e={targetElement:document.body,buttonElement:document.getElementById("submit"),toggleClass:"js-state--sending",setSending:function(){this.targetElement.classList.add(this.toggleClass),this.buttonElement.disabled=!0},removeSending:function(){this.targetElement.classList.remove(this.toggleClass),this.buttonElement.disabled=!1}};(function(){var a=document.getElementById("emailForm");a.onsubmit=c})(),function(){function a(){b.srcdoc=c.value}var b=document.getElementById("emailPreview"),c=document.getElementById("html"),d=document.getElementById("update");d.addEventListener("change",function(){a()}),d.addEventListener("click",function(b){b.preventDefault(),a()})}()})();